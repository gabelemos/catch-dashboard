<html>
    <head>
        <link rel="icon" type="image/x-icon" href="https://catch.inf.br/assets/img/favicon.ico">
        <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Catch Dashboard - CATCH AI</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
        <script type="module">
          import Typebot from 'https://cdn.jsdelivr.net/npm/@typebot.io/js@0.3.4/dist/web.js'

          Typebot.initBubble({
            typebot: "catch",
            apiHost: "https://viewer.2n4p3z.easypanel.host",
            previewMessage: {
              message: "Olá, sou o assistente do Catch !",
              autoShowDelay: 2000,
              avatarUrl:
                "https://storage.torrenet-typebot-minio.2n4p3z.easypanel.host/typebot/public/workspaces/clyh4ortp001ucrt7ruytioax/typebots/cm0b8eebk000j4opwrwwrqf5b/hostAvatar?v=1724695833266",
            },
            theme: {
              button: { backgroundColor: "#D27A7D" },
              chatWindow: {
                backgroundColor:
                  "https://builder.2n4p3z.easypanel.host/images/backgrounds/brightRain.jpeg",
              },
            },
          });
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.1/p5.js"></script>
        <script src="https://unpkg.com/ml5@1/dist/ml5.js"></script>

<style>
    canvas {
        display: block;
    }

    svg:not(:host).svg-inline--fa, svg:not(:root).svg-inline--fa {
        overflow: visible;
        box-sizing: content-box;
        margin-right: 10px;
    }

    :root {
        --primary-color: #120f0f;
        --secondary-color: #FAF9F9;
        --accent-color: #FF7675;
        --text-color: #2D3436;
        --bg-color: #F0F3F8;
        --base-font-size: 16px;
    }
    body, html {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        height: 100%;
        font-size: var(--base-font-size);
        overflow: hidden;
    }
    .container {
        display: flex;
        height: 100vh;
        width: 100vw;
    }
    .sidebar {
        width: 250px;
        background-color: var(--primary-color);
        color: var(--secondary-color);
        padding: 30px;
        box-shadow: 4px 0 10px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        height: 100vh;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
    }
    .main-content {
        flex-grow: 1;
        padding: 30px;
        overflow-y: auto;
        height: 100vh;
        position: relative;
    }
    .user-info {
        text-align: center;
        margin-bottom: 40px;
    }
    .logo-container {
        width: 200px;
        height: 100px;
        margin: 0 auto 15px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .logo {
        max-width: 100%;
        max-height: 100%;
    }
    .user-photo-container {
        width: 100px;
        height: 100px;
        margin: 20px auto 10px;
        border-radius: 50%;
        overflow: hidden;
        border: 3px solid var(--secondary-color);
    }
    .user-photo {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    .user-name {
        font-size: 1.1rem;
        font-weight: 600;
        margin-top: 10px;
        color: var(--secondary-color);
    }
    .menu-item {
        padding: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        border-radius: 10px;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        font-size: 1rem;
    }
    .menu-item i {
        margin-right: 15px;
        width: 20px;
    }
    .menu-item:hover, .menu-item.active {
        background-color: rgba(255,255,255,0.2);
        transform: translateX(5px);
    }
    .menu-item2 {
        padding: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        border-radius: 10px;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        font-size: 1rem;
    }
    .menu-item2 i {
        margin-right: 15px;
        width: 20px;
    }
    .menu-item2:hover, .menu-item2.active {
        background-color: rgba(226, 55, 55, 0.884);
        transform: translateX(5px);
    }
    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
    }
    .dashboard-item {
        background-color: var(--secondary-color);
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.05);
        transition: all 0.3s ease;
    }
    .dashboard-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.1);
    }
    .chart-container {
        height: 250px;
        margin-top: 20px;
    }
    .progress-circle {
        width: 200px;
        height: 200px;
        margin: 0 auto;
    }
    h1 {
        font-size: 2rem;
    }
    h3 {
        margin-top: 0;
        color: var(--primary-color);
        font-weight: 600;
        font-size: 1.25rem;
    }
    .stats-container {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
    }
    .stat-item {
        text-align: center;
    }
    .stat-value {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--accent-color);
    }
    .stat-label {
        font-size: 0.875rem;
        color: #7f8c8d;
    }
    .profession-block {
        background-color: rgb(221, 220, 220);
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 20px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.05);
        position: relative;
        overflow: hidden;
    }
    .profession-block h4 {
        margin-top: 0;
        color: var(--primary-color);
        font-size: 1.125rem;
    }
    .profession-block p {
        font-size: 1.125rem;
        font-weight: 600;
        margin-bottom: 0;
    }
    .profession-icon {
        position: absolute;
        right: 20px;
        bottom: 20px;
        font-size: 3rem;
        opacity: 0.2;
        color: var(--primary-color);
    }

    /* Responsividade */
    @media screen and (max-width: 1024px) {
        :root {
            --base-font-size: 14px;
        }
        .container {
            flex-direction: column;
        }
        .sidebar {
            width: 100%;
            padding: 20px;
            position: fixed;
            height: 100%;
            left: -100%;
            top: 0;
            z-index: 1000;
            transition: 0.3s;
        }
        .sidebar.active {
            left: 0;
        }
        .sidebar.active2 {
            transform: translateX(0);
            width: 100%;
            color: rgb(238, 29, 29);
        }
        .main-content {
            padding: 20px;
            margin-left: 0;
            width: 100%;
            box-sizing: border-box;
        }
        .dashboard-grid {
            grid-template-columns: 1fr;
        }
    }

    @media screen and (max-width: 768px) {
        :root {
            --base-font-size: 12px;
        }
        .stats-container {
            flex-direction: column;
        }
        .stat-item {
            margin-bottom: 15px;
        }
        .progress-circle {
            width: 150px;
            height: 150px;
        }
        .main-content {
            padding: 15px;
        }
        .dashboard-item {
            padding: 20px;
        }
    }

    @media screen and (max-width: 480px) {
        :root {
            --base-font-size: 10px;
        }
        .menu-item {
            padding: 10px;
        }
        .dashboard-item {
            padding: 15px;
        }
        h1 {
            font-size: 1.75rem;
        }
        h3 {
            font-size: 1.125rem;
        }
        .stat-value {
            font-size: 1.25rem;
        }
        .stat-label {
            font-size: 0.75rem;
        }
        .main-content {
            padding: 10px;
        }
    }

    /* Menu hamburguer para dispositivos móveis */
    .menu-toggle {
        display: none;
        cursor: pointer;
        font-size: 1.5rem;
        position: fixed;
        top: 15px;
        right: 15px;
        z-index: 1001;
        color: var(--primary-color);
        background-color: var(--secondary-color);
        padding: 5px 10px;
        border-radius: 5px;
    }

    @media screen and (max-width: 1024px) {
        .menu-toggle {
            display: block;
        }
        .sidebar {
            transform: translateX(-100%);
            width: 0;
            overflow: hidden;
        }
        .sidebar.active {
            transform: translateX(0);
            width: 100%;
        }
        .main-content {
            width: 100%;
            padding-top: 60px; /* Espaço para o botão do menu */
        }
    }

    /* Novo estilo para o logo central */
    .central-logo-container {
        text-align: center;
        margin-bottom: 20px;
    }
    .central-logo {
        max-width: 200px;
        max-height: 100px;
    }

    /* Estilo atualizado para o mapa de calor */
    .heatmap-container {
        background-color: var(--secondary-color);
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        position: relative;
        overflow: hidden;
    }

    #heatmap {
        width: 100%;
        height: 400px;
        border-radius: 10px;
        overflow: hidden;
        position: relative;
        background-color: #1a2b3c; /* Fundo escuro para melhor contraste */
    }

    .heatmap-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, rgba(108, 92, 231, 0.1), rgba(255, 118, 117, 0.1));
        pointer-events: none;
    }

    .neighborhood {
        position: absolute;
        font-size: 12px;
        font-weight: bold;
        color: #ffffff; /* Texto branco para melhor visibilidade */
        background-color: rgba(0, 0, 0, 0.6); /* Fundo escuro semi-transparente */
        padding: 5px 10px;
        border-radius: 15px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        transition: all 0.3s ease;
    }

    .neighborhood:hover {
        transform: scale(1.1);
        box-shadow: 0 5px 15px rgba(0,0,0,0.4);
    }

    .heatmap-legend {
        display: flex;
        justify-content: space-between;
        margin-top: 15px;
        padding: 10px;
        background-color: rgba(255,255,255,0.9);
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .legend-item {
        display: flex;
        align-items: center;
    }

    .legend-color {
        width: 20px;
        height: 20px;
        margin-right: 8px;
        border-radius: 4px;
    }

    .legend-label {
        font-size: 12px;
        color: var(--text-color);
        font-weight: 600;
    }

    /* Novos estilos para os ícones de ação */
    .action-icons {
        display: flex;
        justify-content: flex-end;
        position: absolute;
        top: 20px;
        left: 20px;
        z-index: 1000;
    }
    .action-icon {
        font-size: 1.5rem;
        color: var(--primary-color);
        margin-left: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    .action-icon:hover {
        transform: scale(1.2);
    }

    /* Estilos para o novo bloco de sub-áreas de construção civil */
    .construction-subareas {
        background-color: var(--secondary-color);
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.05);
    }
    .subarea-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding: 10px;
        background-color: #f8f9fa;
        border-radius: 8px;
        transition: all 0.3s ease;
    }
    .subarea-item:hover {
        background-color: #e9ecef;
    }
    .subarea-name {
        font-weight: 600;
        color: var(--primary-color);
    }
    .subarea-percentage {
        font-weight: 700;
        color: var(--accent-color);
    }
    .subarea-bar {
        height: 8px;
        background-color: #e9ecef;
        border-radius: 4px;
        overflow: hidden;
        margin-top: 5px;
    }
    .subarea-bar-fill {
        height: 100%;
        background-color: var(--primary-color);
        border-radius: 4px;
    }

    /* Estilo para a barra de rolagem fina e discreta */
    .main-content::-webkit-scrollbar {
        width: 8px;
    }

    .main-content::-webkit-scrollbar-track {
        background: #f1f1f1;
    }

    .main-content::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 4px;
    }

    .main-content::-webkit-scrollbar-thumb:hover {
        background: #555;
    }

    /* Novo estilo para a barra de rolagem lateral direita */
    .main-content {
        overflow-y: scroll;
        scrollbar-width: thin;
        scrollbar-color: #888 #f1f1f1;
    }

    .main-content::-webkit-scrollbar {
        width: 8px;
    }

    .main-content::-webkit-scrollbar-track {
        background: #f1f1f1;
    }

    .main-content::-webkit-scrollbar-thumb {
        background-color: #888;
        border-radius: 4px;
        border: 2px solid #f1f1f1;
    }

    .main-content::-webkit-scrollbar-thumb:hover {
        background-color: #555;
    }

    /* Novo estilo para o select e ícone de lupa */
    .search-container {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 20px;
        padding: 10px;
        background-color: var(--secondary-color);
        border-radius: 10px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .search-select {
        padding: 10px;
        font-size: 16px;
        border: 1px solid #ddd;
        border-radius: 5px 0 0 5px;
        outline: none;
        background-color: white;
        color: var(--text-color);
    }

    .search-button {
        padding: 10px 15px;
        background-color: var(--primary-color);
        color: white;
        border: none;
        border-radius: 0 5px 5px 0;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .search-button:hover {
        background-color: #5649c0;
    }

    .fa-search {
        font-size: 18px;
    }

    .central-logo-catch {
        margin-left: 45%;
        height: 85px;
    }

    .central-title {
        text-align: center;
    }

    .central-text {
        text-align: center;
    }

    a {
        color: white;
        text-decoration: none;
    }

    .helping-IA {
        color: white;
        background-color: rgb(211, 79, 79);
        width: 280px;
        height: 40px;
        border-radius: 10px;
        border: none;
        box-shadow: rgba(0, 0, 0, 0.555) 3px 3px 10px;
        font-weight: 600;
        font-family: 'Poppins', sans-serif;
        transition: 0.3s all;
        position: relative;
        left: 37%;
    }

    #sending {
        margin-bottom: 3%;
    }

    .helping-IA:hover {
        background-color: rgb(241, 124, 124);
        /*width: 10%;rgb(255, 104, 104)
        left: 46%;*/
        font-size: 16px;
        cursor: pointer;
        transition: 0.3s all;
    }

    .preview-container {
        display: flex;
        flex-wrap: wrap;
        margin-top: 40px;
    
    }

    .preview-area-img {
        text-align: center;
        color: rgb(109, 109, 109);
        width: 100%;
        box-shadow: 1px 6px 10px 0px #cf5454a2;
        border-radius: 10px;
        border-top: none;
        padding: 9.3%;
        margin-bottom: 2%;
    }

    .preview-area-img img {
        width: 25vw;
        height: 40vh;
        margin-left: 17vw;
    }

    .file-label {
        font-family: 'Poppins', sans-serif;
        display: block;
        box-shadow: rgba(0, 0, 0, 0.555) 3px 3px 10px;
        font-weight: 600;
        padding: 10px;
        margin-right: 350px;
        margin-left: 350px;
        text-align: center;
        background-color: var(--secondary-color);
        border-radius: 15px;
        border: 2px solid red;
        cursor: pointer;
        transition: 0.3s all;
    }
    
    .file-label:hover {
        transition: 0.3s all;
        background-color: #ff00003d;
        }
        
        .file-input {
            display: none;
        }
        
        .response {
            color: none;
        }

        .result-text {
            font-weight: 600;
            font-size: 24px;
            text-align: center;
        }

        .result-text2 {
            text-align: center;
        }

    </style>
</head>
<body>
    <!-- SCIRPT DA IA E CARREGAMENTO -->
    <script src="/IA/sketch.js"></script>

    <div class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
    </div>
    
    <div class="container">
        <div class="sidebar" id="sidebar">
            <div class="user-info">
                <div class="logo-container">
                    <img src="https://catch.inf.br/assets/img/logomarca.webp" alt="Logo CATCH" class="logo">
                </div>
                <div class="user-photo-container">
                    <img src="https://catch.inf.br/assets/img/team/eraldo.jpg" alt="Foto do usuário" class="user-photo">
                </div>
                <div class="user-name">Eraldo Guerra<br>
				CEO</div>
            </div>
            <a href="HOME.html">
                <div class="menu-item ">
                    <i class="fas fa-home"></i>Painel
                </div>
            </a>

            <a href="">
                <div class="menu-item">
                    <i class="fas fa-chart-line"></i>Análises
                </div>
            </a>

            <a href="PROJETOS.html">
                <div class="menu-item">
                    <i class="fas fa-tasks"></i>Projetos
                </div>
            </a>

            <a href="catchAI.html">
                <div class="menu-item2 active">
                    <i class="fa-solid fa-microchip"></i>CATCH AI
                </div>
            </a>

            <a href="">
                <div class="menu-item">
                    <i class="fas fa-cog"></i> Configurações
                </div>
            </a>

        </div>
        <div class="main-content"><br>
            <!--<div class="central-logo-container">
                <img src="https://hojepe.com.br/wp-content/uploads/2024/04/92529/prefeitura-do-recife-e-governo-federal-assinam-ordem-de-servico-de-18-obras-de-encostas-que-vao-beneficiar-cerca-de-3-mil-pessoas.png" alt="Logo CATCH" class="central-logo">
            </div>-->
            <h1 class="central-title">Bem-vindo a área de utilização de nossa I.A</h1>
            <button class="helping-IA"><a href="PROJETOS.html">Me ensine a utilizar a I.A!</a></button>
            <h2 class="central-title"> Envie uma foto de seu problema para utilizar nossa I.A &#x21B4;</h2>
            <!--<div class="search-container">
                <select class="search-select" id="searchOptions">
                    <option value="">Selecione uma opção de busca</option>
                    <option value="region">Buscar por região</option>
                    <option value="program">Buscar por programa</option>
                    <option value="skill">Buscar por habilidade</option>
                </select>
                <button class="search-button" onclick="performSearch()">
                    <i class="fas fa-search"></i>
                </button>
            </div>-->
            <div class="action-icons">
                <i class="fas fa-share-alt action-icon" title="Compartilhar"></i>
                <i class="fas fa-cloud-upload-alt action-icon" title="Salvar na nuvem"></i>
                <i class="fas fa-print action-icon" title="Imprimir relatório"></i>
            </div>
            <div class="dashboard-grid">
                <div class="dashboard-item">
                        <label for="fileInput" class="file-label">ESCOLHA SUA IMAGEM... &#128247;</label>
                        <input type="file" id="fileInput" class="file-input" accept="image/*" multiple />
                        <div id="previewContainer" class="preview-container">
                            <div id="preview-area-img" class="preview-area-img">
                                <h3 id="textpreview">A imagem irá aparecer aqui</h3>
                                <img src="" id="preview" class="img-true">
                            </div>
                        </div>
                        <p class="result-text2" id="result2"></p>
                        <p class="result-text" id="result"></p>
                        <button id="sending" class="helping-IA">ENVIAR</button>
                    </form>
                </div>
            </div>
        </div>
    </div>


<!-- SCRIPT PARA LER E GUARDAR O CAMINHO DA IMAGEM SELECIONADA-->
<script>
    
    let imageUrl = ''; // Variável para armazenar o caminho da imagem

    document.getElementById('fileInput').addEventListener('change', function(event) {
        const file = event.target.files[0]; // Pega o primeiro arquivo selecionado
        if (file) {
            const reader = new FileReader();

            // Define o que fazer quando a leitura do arquivo for concluída
            reader.onload = function(e) {
                imageUrl = e.target.result; // Salva o caminho da imagem na variável
                console.log('Caminho da imagem:', imageUrl); // Aqui você pode ver o caminho da imagem

                // Exibir a imagem na página e esconde o texto de preview
                textpreview = document.getElementById('textpreview');
                textpreview.style.display = 'none';
                const imgElement = document.getElementById('preview');
                imgElement.src = imageUrl;
                imgElement.style.display = 'block'; // Exibe a imagem

                //Exibir URL da imagem na página
                document.getElementById('preview').innerText = `Caminho da imagem salva: ${imageUrl}`;
            };

            // Lê o arquivo como uma URL de dados
            reader.readAsDataURL(file);
        }
    });

</script>

<!-- SCRIPT PARA RESOLUÇÃO E MENU-->
<script>
    // Funcionalidade do menu hamburguer
    const menuToggle = document.getElementById('menuToggle');
    const sidebar = document.getElementById('sidebar');
    const mainContent = document.querySelector('.main-content');

    function toggleSidebar() {
        sidebar.classList.toggle('active');
    }

    menuToggle.addEventListener('click', toggleSidebar);

    // Fechar o menu ao clicar fora dele
    document.addEventListener('click', (event) => {
        const isClickInsideMenu = sidebar.contains(event.target) || menuToggle.contains(event.target);
        if (!isClickInsideMenu && sidebar.classList.contains('active')) {
            toggleSidebar();
        }
    });

    // Ajustar layout para dispositivos móveis
    function adjustLayoutForMobile() {
        if (window.innerWidth <= 1024) {
            sidebar.classList.remove('active');
            menuToggle.style.display = 'block';
        } else {
            sidebar.classList.remove('active');
            menuToggle.style.display = 'none';
        }
    }

    window.addEventListener('resize', adjustLayoutForMobile);
    adjustLayoutForMobile(); // Chamada inicial

    // Ajustar gráficos para responsividade
    function resizeCharts() {
        const charts = [totalDistributionChart, jobOpportunitiesChart, performanceMetricsChart, monthlyEvolutionChart, conversionRateChart];
        charts.forEach(chart => {
            if (chart) {
                chart.resize();
            }
        });
    }

    window.addEventListener('resize', resizeCharts);

    // Configurações comuns para os gráficos
    const commonOptions = {
        responsive: true,
        maintainAspectRatio: false,
        animation: {
            duration: 1000,
            easing: 'easeInOutQuart'
        },
        plugins: {
            legend: {
                display: true,
                position: 'bottom'
            }
        },
        scales: {
            x: {
                grid: {
                    display: false
                }
            },
            y: {
                grid: {
                    color: 'rgba(0,0,0,0.05)'
                },
                beginAtZero: true
            }
        }
    };

    const createGradient = (ctx, color) => {
        const gradient = ctx.createLinearGradient(0, 0, 0, 400);
        gradient.addColorStop(0, color);
        gradient.addColorStop(1, 'rgba(255,255,255,0)');
        return gradient;
    };

    const months = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'];

    // Dados iniciais
    let constructionData = [415, 430, 445, 460, 475, 490];
    let mechanicsData = [344, 355, 366, 377, 388, 399];
    let commerceData = [415, 425, 435, 445, 455, 465];
    let classesData = [359, 370, 381, 392, 403, 414];

    // Função para atualizar valores nos blocos de profissão
    function updateProfessionBlocks() {
        document.getElementById('constructionValue').textContent = `${constructionData[constructionData.length - 1]} inscrições`;
        document.getElementById('mechanicsValue').textContent = `${mechanicsData[mechanicsData.length - 1]} inscrições`;
        document.getElementById('commerceValue').textContent = `${commerceData[commerceData.length - 1]} inscrições`;
        document.getElementById('classesValue').textContent = `${classesData[classesData.length - 1]} inscrições`;
    }

    // Gráfico de Distribuição Total
    const totalDistributionCtx = document.getElementById('totalDistributionChart').getContext('2d');
    const totalDistributionChart = new Chart(totalDistributionCtx, {
        type: 'doughnut',
        data: {
            labels: ['Construção Civil', 'Mecânica', 'Comércio', 'Aulas'],
            datasets: [{
                data: [415, 344, 415, 359],
                backgroundColor: ['#6C5CE7', '#FF7675', '#00B894', '#FDCB6E']
            }]
        },
        options: {
            ...commonOptions,
            cutout: '80%'
        }
    });

    // Gráfico de Oportunidades de Vagas
    const jobOpportunitiesCtx = document.getElementById('jobOpportunitiesChart').getContext('2d');
    const jobOpportunitiesChart = new Chart(jobOpportunitiesCtx, {
        type: 'bar',
        data: {
            labels: ['Construção Civil', 'Mecânica', 'Comércio', 'Aulas'],
            datasets: [{
                label: 'Vagas Disponíveis',
                data: [50, 30, 40, 25],
                backgroundColor: ['#6C5CE7', '#FF7675', '#00B894', '#FDCB6E']
            }]
        },
        options: {
            ...commonOptions,
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Número de Vagas'
                    }
                }
            }
        }
    });

    // Gráfico de Métricas de Desempenho
    const performanceMetricsCtx = document.getElementById('performanceMetricsChart').getContext('2d');
    const performanceMetricsChart = new Chart(performanceMetricsCtx, {
        type: 'line',
        data: {
            labels: months,
            datasets: [
                {
                    label: 'Taxa de Preenchimento',
                    data: [75, 78, 80, 82, 85, 87],
                    borderColor: '#6C5CE7',
                    backgroundColor: createGradient(performanceMetricsCtx, 'rgba(108, 92, 231, 0.5)')
                },
                {
                    label: 'Satisfação dos Candidatos',
                    data: [85, 86, 87, 88, 89, 90],
                    borderColor: '#FF7675',
                    backgroundColor: createGradient(performanceMetricsCtx, 'rgba(255, 118, 117, 0.5)')
                }
            ]
        },
        options: {
            ...commonOptions,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 100,
                    title: {
                        display: true,
                        text: 'Porcentagem'
                    }
                }
            }
        }
    });

    // Mapa de Calor
    const heatmapConfig = {
        container: document.getElementById('heatmap'),
        radius: 40,
        maxOpacity: 0.6,
        minOpacity: 0.1,
        blur: 0.75,
        gradient: {
            0.4: 'blue',
            0.6: 'cyan',
            0.7: 'lime',
            0.8: 'yellow',
            1.0: 'red'
        }
    };

    const heatmapInstance = h337.create(heatmapConfig);

    const heatmapData = [
        { x: 50, y: 50, value: 80, label: 'Boa Vista' },
        { x: 150, y: 100, value: 60, label: 'Santo Antônio' },
        { x: 250, y: 150, value: 40, label: 'São José' },
        { x: 100, y: 200, value: 70, label: 'Pina' },
        { x: 200, y: 250, value: 50, label: 'Boa Viagem' }
    ];

    heatmapInstance.setData({
        max: 100,
        data: heatmapData
    });

    heatmapData.forEach(point => {
        const neighborhood = document.createElement('div');
        neighborhood.className = 'neighborhood';
        neighborhood.textContent = point.label;
        neighborhood.style.left = `${point.x}px`;
        neighborhood.style.top = `${point.y}px`;
        document.getElementById('heatmap').appendChild(neighborhood);
    });

    // Gráfico de Evolução Mensal
    const monthlyEvolutionCtx = document.getElementById('monthlyEvolutionChart').getContext('2d');
    const monthlyEvolutionChart = new Chart(monthlyEvolutionCtx, {
        type: 'line',
        data: {
            labels: months,
            datasets: [
                {
                    label: 'Construção Civil',
                    data: constructionData,
                    borderColor: '#6C5CE7',
                    backgroundColor: createGradient(monthlyEvolutionCtx, 'rgba(108, 92, 231, 0.5)')
                },
                {
                    label: 'Mecânica',
                    data: mechanicsData,
                    borderColor: '#FF7675',
                    backgroundColor: createGradient(monthlyEvolutionCtx, 'rgba(255, 118, 117, 0.5)')
                },
                {
                    label: 'Comércio',
                    data: commerceData,
                    borderColor: '#00B894',
                    backgroundColor: createGradient(monthlyEvolutionCtx, 'rgba(0, 184, 148, 0.5)')
                },
                {
                    label: 'Aulas',
                    data: classesData,
                    borderColor: '#FDCB6E',
                    backgroundColor: createGradient(monthlyEvolutionCtx, 'rgba(253, 203, 110, 0.5)')
                }
            ]
        },
        options: {
            ...commonOptions,
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Número de Inscrições'
                    }
                }
            }
        }
    });

    // Gráfico de Taxa de Conversão
    const conversionRateCtx = document.getElementById('conversionRateChart').getContext('2d');
    const conversionRateChart = new Chart(conversionRateCtx, {
        type: 'bar',
        data: {
            labels: months,
            datasets: [{
                label: 'Taxa de Conversão',
                data: [15, 18, 20, 22, 25, 28],
                backgroundColor: '#6C5CE7'
            }]
        },
        options: {
            ...commonOptions,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 100,
                    title: {
                        display: true,
                        text: 'Porcentagem de Conversão'
                    }
                }
            }
        }
    });

    // Função para atualizar os dados dos gráficos
    function updateChartData() {
        const newData = generateRandomData();

        constructionData.shift();
        constructionData.push(newData.construction);
        mechanicsData.shift();
        mechanicsData.push(newData.mechanics);
        commerceData.shift();
        commerceData.push(newData.commerce);
        classesData.shift();
        classesData.push(newData.classes);

        monthlyEvolutionChart.data.datasets[0].data = constructionData;
        monthlyEvolutionChart.data.datasets[1].data = mechanicsData;
        monthlyEvolutionChart.data.datasets[2].data = commerceData;
        monthlyEvolutionChart.data.datasets[3].data = classesData;

        monthlyEvolutionChart.update();

        updateProfessionBlocks();

        // Atualizar outros gráficos com novos dados aleatórios
        totalDistributionChart.data.datasets[0].data = [newData.construction, newData.mechanics, newData.commerce, newData.classes];
        totalDistributionChart.update();

        jobOpportunitiesChart.data.datasets[0].data = [
            Math.round(newData.construction * 0.1),
            Math.round(newData.mechanics * 0.1),
            Math.round(newData.commerce * 0.1),
            Math.round(newData.classes * 0.1)
        ];
        jobOpportunitiesChart.update();

        performanceMetricsChart.data.datasets[0].data = generateRandomDataArray(6, 75, 95);
        performanceMetricsChart.data.datasets[1].data = generateRandomDataArray(6, 80, 95);
        performanceMetricsChart.update();

        conversionRateChart.data.datasets[0].data = generateRandomDataArray(6, 15, 35);
        conversionRateChart.update();

        // Atualizar o número total de inscrições
        const totalInscriptions = constructionData[constructionData.length - 1] +
                                  mechanicsData[mechanicsData.length - 1] +
                                  commerceData[commerceData.length - 1] +
                                  classesData[classesData.length - 1];
        document.getElementById('totalInscriptions').textContent = totalInscriptions;

        // Calcular e atualizar a taxa de crescimento
        const previousTotal = constructionData[constructionData.length - 2] +
                              mechanicsData[mechanicsData.length - 2] +
                              commerceData[commerceData.length - 2] +
                              classesData[classesData.length - 2];
        const growthRate = ((totalInscriptions - previousTotal) / previousTotal) * 100;
        document.getElementById('growthRate').textContent = growthRate.toFixed(2) + '%';

        // Atualizar os dados das sub-áreas da construção civil
        updateConstructionSubareas();
    }

    function generateRandomData() {
        return {
            construction: Math.floor(Math.random() * (550 - 450) + 450),
            mechanics: Math.floor(Math.random() * (450 - 350) + 350),
            commerce: Math.floor(Math.random() * (550 - 450) + 450),
            classes: Math.floor(Math.random() * (450 - 350) + 350)
        };
    }

    function generateRandomDataArray(length, min, max) {
        return Array.from({length}, () => Math.floor(Math.random() * (max - min + 1) + min));
    }

    function updateConstructionSubareas() {
        const total = 100;
        const pedreiroPercentage = Math.floor(Math.random() * (50 - 40 + 1) + 40);
        const pintorPercentage = Math.floor(Math.random() * (35 - 25 + 1) + 25);
        const eletricistaPercentage = total - pedreiroPercentage - pintorPercentage;

        document.getElementById('pedreiroPercentage').textContent = pedreiroPercentage + '%';
        document.getElementById('pintorPercentage').textContent = pintorPercentage + '%';
        document.getElementById('eletricistaPercentage').textContent = eletricistaPercentage + '%';

        document.getElementById('pedreiroBar').style.width = pedreiroPercentage + '%';
        document.getElementById('pintorBar').style.width = pintorPercentage + '%';
        document.getElementById('eletricistaBar').style.width = eletricistaPercentage + '%';
    }

    // Atualizar os dados a cada 5 segundos
    setInterval(updateChartData, 5000);

    // Função de busca
    function performSearch() {
        const searchOption = document.getElementById('searchOptions').value;
        if (searchOption) {
            alert(`Realizando busca por ${searchOption}`);
            // Aqui você pode implementar a lógica de busca real
        } else {
            alert('Por favor, selecione uma opção de busca');
        }
    }

    // Inicialização
    updateChartData();
    updateConstructionSubareas();

    document.getElementById('fileInput').addEventListener('change', function(event) {
        const previewContainer = document.getElementById('previewContainer');
        previewContainer.innerHTML = ''; // Limpa a pré-visualização anterior
    
        const files = event.target.files;
    
        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            const reader = new FileReader();
    
            reader.onload = function(e) {
                const img = document.createElement('img');
                img.src = e.target.result;
                previewContainer.appendChild(img);
            };
    
            reader.readAsDataURL(file); 
        }
    }); 
    
    document.getElementById('uploadForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Impede o envio padrão do formulário
    
        const fileInput = document.getElementById('fileInput');
        const file = fileInput.files[0]; // Obtém o primeiro arquivo selecionado
    
        const formData = new FormData();
        formData.append('file', file); // Adiciona o arquivo ao FormData
    
        fetch('/upload', {
            method: 'POST',
            body: formData
        })
        
        .then(response => response.json())
        .then(data => {
            const responseElement = document.getElementById('response');
            if(data['message'] == "Nenhum arquivo enviado"){
                responseElement.innerText = data.message;
                responseElement.style.color = "red";
            } else {
                responseElement.style.color = "blue";
                responseElement.innerText = data.message;
    
                // Limpa a pré-visualização e o campo de entrada após o envio
                fileInput.value = ''; // Limpa o campo de entrada
                document.getElementById('previewContainer').innerHTML = ''; // Limpa a pré-visualização
            }
        })
        .catch(error => {
            console.error('Erro:', error);
        });
    });
</script>
</body></html>